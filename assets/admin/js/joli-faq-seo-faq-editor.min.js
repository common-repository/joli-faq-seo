"use strict";!function(d){String.prototype.isEmpty=function(){return 0===this.length||!this.trim()};var l={pro:!1,scrolling:null,wpbar:null,wpbarHeight:null,wpmenu:null,wpmenuWidth:null,position:null,jfaqGroups:null,jfaqList:null,jfaqListPosition:null,jfaqListWidth:null,copyHelper:null,faq_groups:[],faqs:[],faqsGutEditing:[],allFaqsTemplate:null,tinyMCEinitCount:0,wpEditorOptions:{tinymce:{wpautop:!0,theme:"modern",skin:"lightgray",language:"en",placeholder:"FAQ Answer...",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",tabfocus_elements:":prev,:next",plugins:"charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,lists",resize:"vertical",menubar:!1,indent:!1,toolbar1:"formatselect forecolor | bold italic underline strikethrough blockquote | bullist numlist | alignleft aligncenter alignright | link unlink | spellchecker wp_adv",toolbar2:"undo redo |  alignjustify hr | pastetext removeformat charmap outdent indent wp_help",body_class:"id post-type-post post-status-publish post-format-standard",wpeditimage_disable_captions:!1,wpeditimage_html5_captions:!0,init_instance_callback:function(e){e.shortcuts.add("ctrl+s","Save.",function(e){var t=this.container,a=t.closest(".jfaq-item-edit");d(a).hasClass("--add")?l.doInsertNewFAQ(t):d(a).hasClass("--edit")&&l.doUpdateFAQ(t)})}},quicktags:!0,mediaButtons:!0},init:function(){Handlebars.registerHelper("faqDisabled",function(e,t,a){return l.pro&&-1!==e.indexOf(t)?1:0}),this.allFaqsTemplate=Handlebars.compile(d("#all-faqs-template").html()),this.editFAQTemplate=Handlebars.compile(d("#faq-item-edit-template").html()),this.faqGroupsTemplate=Handlebars.compile(d("#faq-group-template").html()),l.faqs=JFAQ.faqs,l.faq_groups=JFAQ.faq_groups,l.faqGroups=d(".jfaq-group"),l.FAQs=d(".jfaq-group"),l.bindEvents(),l.render(),l.scrolling=!1,l.wpbar=d("#wpadminbar"),l.wpbarHeight=d(l.wpbar).outerHeight(!0),l.wpmenu=d("#adminmenuwrap"),l.wpmenuWidth=d(l.wpmenu).outerWidth(!0),l.position=d(document).scrollTop(),l.jfaqGroups=d(".jfaq-groups")[0],l.jfaqList=d(".jfaq-faqs")[0],l.jfaqListPosition=d(l.jfaqList).offset(),l.jfaqListWidth=d(l.jfaqList).outerWidth(!0),d(window).on("scroll",function(){l.scrolling=!0}),d(window).on("resize",function(){l.wpbarHeight=d(l.wpbar).outerHeight(!0),l.jfaqListPosition=d(l.jfaqList).offset(),l.wpmenuWidth=d(l.wpmenu).outerWidth(!0)}),setInterval(function(){l.scrolling&&(l.scrolling=!1,l.updateLayout())},50)},bindEvents:function(){d(document).on("click",".jfaq-group .jb-header",l.toggleFaqGroup.bind(this)),d("#add-faq-group-btn").on("click",l.addNewFAQGroup.bind(this)),d(document).on("click",".jfaq-group.--add .jfaq-group-edit-save",l.insertNewFAQGroup),d(document).on("click",".jfaq-group.--add .jfaq-group-edit-cancel",l.cancelNewFAQGroup),d(document).on("click",".jfaq-group.--edit .jfaq-group-edit-save",l.updateFAQGroup),d(document).on("click",".jfaq-group.--edit .jfaq-group-edit-cancel",l.cancelEditFAQGroup),d(document).on("keyup",".jfaq-group.--add",l.addFAQGroupKeyUp),d(document).on("keyup",".jfaq-group.--edit",l.editFAQGroupKeyUp),d(document).on("click",".jfaq--edit-faq-group",l.editFAQGroup),d(document).on("dblclick",".jfaq-group-title",l.editFAQGroup),d(document).on("click",".jfaq--delete-faq-group",l.deleteFAQGroup),d(document).on("dblclick",".jfaq-group-shortcode",l.copyShortcode),d(document).on("click","#jfaq-toggle-compact",l.faqGroupToggleCompactView),d(document).on("click","#jfaq-collapse-all",l.faqGroupCollapseAll),d(document).on("click","#jfaq-expand-all",l.faqGroupExpandAll),d(document).on("click","#jfaq-bulk-edit",l.faqGroupBulkEdit),d(document).on("click","#move-to-category-apply",l.faqGroupBulkMoveToCategory),d(document).on("click","#add-faq-group-cat-btn",l.showAddCategoryForm),d(document).on("click","#delete-faq-group-cat-btn",l.faqGroupDeleteCategory),d(document).on("click","#add-new-faq-group-cat-btn",l.faqGroupAddNewCategory),d(document).on("click","#cancel-add-new-faq-group-cat-btn",l.faqGroupCancelAddNewCategory),d(document).on("keyup","#new-category-name",l.addFAQGroupCategoryKeyUp),d(document).on("click",".jfaq-item-edit.--add .jfaq-item-edit-save",l.insertNewFAQ),d(document).on("click",".jfaq-item-edit.--add .jfaq-item-edit-cancel",l.cancelNewFAQ),d(document).on("click",".jfaq-item-edit.--edit .jfaq-item-edit-save",l.updateFAQ),d(document).on("click",".jfaq-item-edit.--edit .jfaq-item-edit-cancel",l.cancelEditFAQ),d(document).on("keydown",".jfaq-item-edit",l.editFAQKeyDown),d(document).on("keydown",l.globalKeyDown),d(document).on("keyup",".jfaq-item-edit",l.editFAQKeyUp),d(document).on("click",".jfaq--add-faq",l.addNewFAQ),d(document).on("click",".jfaq--add-faq-gut",l.addNewFAQGutenberg),d(document).on("click",".jfaq--duplicate-faq",l.duplicateFAQ),d(document).on("click",".jfaq--edit-faq",l.editFAQ),d(document).on("click",".jfaq--edit-faq-gut",l.editFAQGutenberg),d(document).on("dblclick",".jfaq-item-title",l.editFAQInit),d(document).on("click",".jfaq--delete-faq",l.deleteFAQ),d(document).on("tinymce-editor-init",function(e,t){0==l.tinyMCEinitCount&&(l.refreshLayout(),l.tinyMCEinitCount++)}),d(document).on("mouseover",".jfaq-item",l.itemHighlight),d(document).on("mouseout",".jfaq-item",l.itemHighlight),d(document).on("change","input:checkbox.jfaq-checkbox",function(){if(!l.pro)return alert("Disabling FAQs is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),l.render(),!1;var e=d(this).attr("data-linkedfield"),e=d("#check_"+e);d(e).val(d(this).prop("checked")?1:0).trigger("change")}),d(window).on("focus",function(){if(l.faqsGutEditing.length){l.showSyncOverlay();for(var a=l.faqsGutEditing.length-1;0<=a;a--)d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_check_gutenberg_faq",faq_id:parseInt(l.faqsGutEditing[a])}}).success(function(e){var t;1==e.success?(t=e.data.faq.ID,1==e.data.gutenberg&&(t=l.getIndexFromFaqID(e.data.faq.ID),l.faqs[t].title=e.data.faq.post_title,l.faqs[t].content=e.data.faq.post_content,l.faqs[t].gut=!0,l.render(),l.faqsGutEditing.splice(a,1))):alert("Error, please try again."),l.hideSyncOverlay()}).fail(function(e,t,a){alert("An error occured: "+t),l.hideSyncOverlay()})}})},showSyncOverlay:function(){d(document.body).addClass("--jfaq-syncing")},hideSyncOverlay:function(){d(document.body).removeClass("--jfaq-syncing")},updateLayout:function(){if(d(window).width()<768)return!1;var e;l.position=d(document).scrollTop(),l.position+l.wpbarHeight>l.jfaqListPosition.top?(e="0.35",e="calc((100% - "+l.wpmenuWidth+"px) * "+e+")",d(l.jfaqGroups).css("margin-right","calc(20px + (100% * 0.35))"),d(l.jfaqList).addClass("--fixed"),d(l.jfaqList).css("width",e),d(l.jfaqList).css("top",l.wpbarHeight+"px")):(d(l.jfaqGroups).css("margin-right",""),d(l.jfaqList).removeClass("--fixed"),d(l.jfaqList).css("top",""),d(l.jfaqList).css("width",""))},itemHighlight:function(t){var e=this.dataset.faqId;[].forEach.call(document.querySelectorAll('.jfaq-item[data-faq-id="'+e+'"]'),function(e){e.classList["mouseover"===t.type?"add":"remove"]("--jfaq-highlight")})},render:function(){l.renderFAQs(),l.renderFAQGroups(),l.refreshLayout()},renderFAQs:function(){d(".jfaq-faqs .jb-body").html(this.allFaqsTemplate(this.faqs))},renderFAQGroups:function(){var e=l.getFilteredFAQGroups();d(".jfaq-groups .jfaq-group-list").html(l.faqGroupsTemplate(e))},isInGroup:function(e){e=d(e).closest(".jfaq-box");return!(!e.length||!d(e).hasClass("jfaq-group"))},getAllFaqIds:function(){return l.faqs.map(function(e){return e.ID})},getFilteredFAQGroups:function(){var a=l.getAllFaqIds();return l.faq_groups.map(function(e,t){return{ID:e.ID,title:e.title,position:t,collapsed:e.collapsed,faqs:e.faqs?e.faqs.filter(function(e){return 0<=a.indexOf(parseInt(e))},a).map(function(t){return l.faqs.find(function(e){return e.ID==t},t)},l):[]}},l)},copyShortcode:function(){var e=this,t=d(this).data("shortcode");navigator.clipboard.writeText(t),d(this).text("Copied to clipboard!"),setTimeout(function(){d(e).text(t)},1500,e,t)},faqGroupToggleCompactView:function(){if(!l.pro)return alert("Compact view is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1},faqGroupCollapseAll:function(){if(!l.pro)return alert("Collapsing all FAQ Groups at once is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1},faqGroupExpandAll:function(){if(!l.pro)return alert("Expanding all FAQ Groups at once is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1},faqGroupBulkEdit:function(){if(!l.pro)return alert("Bulk editing is only available in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1},faqGroupBulkMoveToCategory:function(){},updateCategoryFaqGroups:function(e,t){l.showSyncOverlay(),d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_update_category_faq_group",groups_ids:t,category:e}}).success(function(e){l.hideSyncOverlay(),1==e.success?location.reload():alert("Error, please try again.")}).fail(function(e,t,a){l.hideSyncOverlay(),alert("An error occured: "+t)})},showAddCategoryForm:function(){if(!l.pro)return alert("Creating custom categories is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1},addFAQGroupCategoryKeyUp:function(e){27===e.which?l.faqGroupCancelAddNewCategory():13===e.which&&l.faqGroupAddNewCategory()},faqGroupCancelAddNewCategory:function(){},faqGroupAddNewCategory:function(){},faqGroupDeleteCategory:function(){},getFAQGroups:function(){d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_get_faq_groups",args:{category:JFAQ.category||null}}}).success(function(e){1==e.success?(l.faq_groups=e.data.faq_groups,l.renderFAQGroups()):alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+t)})},getFAQs:function(){d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_get_faqs"}}).success(function(e){1==e.success?(l.faqs=e.data.faqs,l.renderFAQs()):alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+t)})},getIndexFromGroupID:function(e){for(var t=this.faq_groups,a=t.length;a--;)if(t[a].ID===e)return a},getIndexFromGroupEl:function(e){for(var t=d(e).data("faq-group-id"),a=this.faq_groups,o=a.length;o--;)if(a[o].ID===t)return o},getIndexFromFaqEl:function(e){for(var t=d(e).data("faq-id"),a=this.faqs,o=a.length;o--;)if(a[o].ID===t)return o},getIndexFromFaqID:function(e){for(var t=this.faqs,a=t.length;a--;)if(t[a].ID===e)return a},getFaqGroupFaqIndexFromFaqID:function(e,t){if(e<0)return!1;for(var a=this.faq_groups[e].faqs.length;a--;){if(this.faq_groups[e].faqs[a]===t)return a;if(a<0)return!1}},insertNewFAQGroup:function(){l.doInsertNewFAQGroup(this)},doInsertNewFAQGroup:function(e){var t=d(e).closest(".jfaq-group"),o=d(t).find(".jfaq-group-edit-save");if(!0===d(o).prop("disabled"))return!1;d(o).prop("disabled",!0);var e=d(t).find(".jfaq-group-title-input"),a=d(e).val();if(a.isEmpty())return alert("Title cannot be empty"),!1;t=d(t).find(".spinner");d(t).addClass("is-active");t={position:d(".jfaq-group").length,faqs:[],category:JFAQ.category||null};d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_create_faq_group",title:a,args:t}}).success(function(e){1==e.success?(e=e.data.faq_group_id,l.faq_groups.push({ID:e,title:a,position:d(".jfaq-group").length,collapsed:!1,faqs:[]}),l.render()):alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+t),d(o).prop("disabled",!1)}).always(function(e){d(o).prop("disabled",!1)},o)},updateFAQGroups:function(){d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_update_faq_groups",groups:JSON.stringify(l.faq_groups),args:{category:JFAQ.category||null}}}).success(function(e){1==e.success||alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+t)})},updateFAQGroup:function(){l.doUpdateFAQGroup(this)},doUpdateFAQGroup:function(e){e=d(e).closest(".jfaq-group");if(d(e).find(".jfaq-group-title-input").val().isEmpty())return alert("FAQ Group title cannot be empty."),!1;l.refreshData(),l.updateFAQGroups(),l.render()},insertNewFAQ:function(){l.doInsertNewFAQ(this)},doInsertNewFAQ:function(e){var t=e||this,a=d(t).closest(".jfaq-box"),o=d(t).closest(".jfaq-item-edit"),i=d(o).find(".jfaq-item-edit-save");if(!0===d(i).prop("disabled"))return!1;d(i).prop("disabled",!0);var n=d(o).find(".jfaq-item-edit-save").data("id"),e=d(o).find(".jfaq-title-input").val(),r="jfaq-tmce-"+n,t=tinymce.get(r).getContent(),n=d("#"+r);if(0<n.length&&n.is(":visible")&&(t=d(n[0]).val()),e.isEmpty()||t.isEmpty())return alert("Title and content cannot be empty."),d(i).prop("disabled",!1),!1;var s=d(o).find(".spinner");d(s).addClass("is-active"),d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_insert_faq",title:e,content:t,args:{},category:JFAQ.category||null}}).done(function(e){var t;1==e.success?(l.faqs.push({ID:e.data.faq_id,title:e.data.title,content:e.data.content}),d(a).hasClass("jfaq-group")&&(t=l.getIndexFromGroupEl(a),l.faq_groups[t].faqs.push(e.data.faq_id),l.updateFAQGroups()),tinymce.remove("#"+r),l.render()):alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+a),d(i).prop("disabled",!1),d(s).removeClass("is-active")}).always(function(e){d(i).prop("disabled",!1),d(s).removeClass("is-active")},i)},duplicateFAQ:function(){l.pro?l.doDuplicateFAQ(this):alert("Duplicating FAQs is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page.")},doDuplicateFAQ:function(){},doInsertNewFAQBlank:function(e){var a=d(e||this).closest(".jfaq-box");d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_insert_faq",blankfaq:!0,args:{},category:JFAQ.category||null}}).done(function(e){var t;1==e.success?(l.faqs.push({ID:e.data.faq_id,title:e.data.title,content:e.data.content}),d(a).hasClass("jfaq-group")&&(t=l.getIndexFromGroupEl(a),l.faq_groups[t].faqs.push(e.data.faq_id),l.updateFAQGroups()),l.render(),0<e.data.faq_id&&(t=JFAQ.edit_post_url+"post.php?post="+e.data.faq_id.toString()+"&action=edit",window.open(t,"_blank").focus(),l.faqsGutEditing.push(e.data.faq_id))):alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+a),d(".jfaq--add-faq-gut").prop("disabled",!1)}).always(function(e){d(".jfaq--add-faq-gut").prop("disabled",!1)})},updateFAQ:function(){l.doUpdateFAQ(this)},doUpdateFAQ:function(e){var a=d(e||this).closest(".jfaq-item-edit"),o=d(a).find(".jfaq-item-edit-save");if(!0===d(o).prop("disabled"))return!1;d(o).prop("disabled",!0);var t=d(a).data("faq-id"),i=d(a).find(".jfaq-title-input").val(),n="jfaq-tmce-"+t,r=tinymce.get(n).getContent(),e=d("#"+n);if(0<e.length&&e.is(":visible")&&(r=d(e[0]).val()),i.isEmpty()||r.isEmpty())return alert("Title and content cannot be empty."),!1;var s=d(a).find(".spinner");d(s).addClass("is-active"),d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_update_faq",faq_id:t,title:i,content:r,args:{}}}).success(function(e){var t;1==e.success?(d(s).removeClass("is-active"),tinymce.remove("#"+n),t=l.getIndexFromFaqEl(a),l.faqs[t].title=e.data.title,l.faqs[t].content=e.data.content,l.render()):alert("Error, please try again.")}).fail(function(e,t,a){alert("An error occured: "+t),d(o).prop("disabled",!1),d(s).removeClass("is-active")}).always(function(e){d(o).prop("disabled",!1),d(s).removeClass("is-active")},o)},deleteFAQ:function(){var t=d(this).closest(".jfaq-item"),a=d(t).data("faq-id"),o=this,e=d(this).closest(".jfaq-box");if(d(e).hasClass("jfaq-group")){var i=l.getIndexFromGroupEl(e),n=l.faq_groups[i].faqs.findIndex(function(e){return parseInt(e)===parseInt(a)},a);d(t).fadeOut(600,function(){l.faq_groups[i].faqs.splice(n,1),l.updateFAQGroups(),l.render()})}else{if(!confirm("Are you sure you really want to delete this FAQ ? This cannot be undone.\nThis FAQ will also be removed from each group containing it."))return!1;d(this).hide();var r=d(t).find(".jfaq-spinner");d(r).addClass("--doing"),d.ajax({url:JFAQ.ajaxurl,type:"POST",dataType:"json",data:{nonce:JFAQ.editor_nonce,action:"jfaq_delete_faq",faq_id:a}}).success(function(e){1==e.success?0<=(e=l.getIndexFromFaqEl(t))&&(l.faqs.splice(e,1),l.render()):(d(o).show(),d(r).removeClass("--doing"),alert("Error, please try again."))}).fail(function(e,t,a){alert("An error occured: "+t)})}},editFAQInit:function(){var e=d(this).closest(".jfaq-item");d(e).data("faq-id");l.doEditFAQ(this)},editFAQ:function(){l.doEditFAQ(this)},doEditFAQ:function(e){var t=d(e||this).closest(".jfaq-item");if(!0===d(t).find(".jfaq--edit-faq").prop("disabled"))return!1;var a=d(t).data("faq-id"),e=d(t).find(".jfaq-item-title").text(),e=(d(t).find(".jfaq-item-emoji").data("emoji"),{mode:"edit",ID:a,title:e,content:d(t).find("input[name=faq-content-"+a+"]").val()}),e=l.editFAQTemplate(e);d(t).hide(),d(e).insertAfter(d(t)),wp.editor.initialize("jfaq-tmce-"+a,l.wpEditorOptions);t=d(t).parent().find('.jfaq-item-edit[data-faq-id="'+a+'"]'),a=d(t).find(".jfaq-title-input");d(a).focus();t=d(a).val().length;a[0].setSelectionRange(t,t),l.refreshLayout()},editFAQGutenberg:function(){if(!l.pro)return alert("Editing FAQs with the block editor is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1;var e=d(this).closest(".jfaq-item");if(!0===d(e).find(".jfaq--edit-faq").prop("disabled"))return!1;var t=d(e).data("faq-id");0<t&&(e=JFAQ.edit_post_url+"post.php?post="+t.toString()+"&action=edit",window.open(e,"_blank").focus(),l.faqsGutEditing.push(t))},cancelEditFAQ:function(){l.doCancelEditFAQ(this)},editFAQKeyUp:function(e){27===e.which&&(d(this).hasClass("--add")?l.doCancelNewFAQ(e.currentTarget):d(this).hasClass("--edit")&&l.doCancelEditFAQ(e.currentTarget))},globalKeyDown:function(e){if(e.ctrlKey&&83==e.which||19==e.which)return e.preventDefault(),!1},editFAQKeyDown:function(e){var t=d(e.target).closest(".jfaq-item-edit");if(e.ctrlKey&&83==e.which||19==e.which)return e.preventDefault(),d(t).hasClass("--add")?l.doInsertNewFAQ(t):d(t).hasClass("--edit")&&l.doUpdateFAQ(t),!1;9===e.which&&d(e.target).is(".jfaq-title-input")&&(e.preventDefault(),t="jfaq-tmce-"+d(t).data("faq-id"),tinymce.execCommand("mceFocus",!1,t),tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.getBody(),!0),tinyMCE.activeEditor.selection.collapse(!1))},doCancelEditFAQ:function(e){var t=d(e).closest(".jfaq-item-edit"),a=d(t).data("faq-id"),e="jfaq-tmce-"+a;tinymce.remove("#"+e);a=d(t).parent().find('.jfaq-item[data-faq-id="'+a+'"]');d(t).remove(),d(a).show(),l.refreshLayout()},addFAQGroupKeyUp:function(e){27===e.which?l.doCancelNewFAQGroup(e.currentTarget):13===e.which&&l.doInsertNewFAQGroup(e.currentTarget)},cancelNewFAQGroup:function(){l.doCancelNewFAQGroup(this)},doCancelNewFAQGroup:function(e){e=d(e).closest(".jfaq-group");d(e).remove(),l.refreshLayout()},cancelNewFAQ:function(){l.doCancelNewFAQ(this)},doCancelNewFAQ:function(e){var t=d(e).closest(".jfaq-item-edit"),e="jfaq-tmce-"+d(t).data("faq-id");tinymce.remove("#"+e),d(t).remove(),l.refreshLayout()},addNewFAQGroup:function(){var e=[{mode:"add",ID:Math.floor(Math.random()*Math.floor(1e3))}],e=l.faqGroupsTemplate(e);d(".jfaq-groups .jfaq-group-list").append(e),d(".jfaq--add-faq").prop("disabled",!0),d(".jfaq-group.--add .jfaq-group-title-input").focus(),l.refreshLayout(),d("html, body").animate({scrollTop:d(document).height()},1e3)},editFAQGroup:function(){var e=d(this).closest(".jfaq-group");d(e).data("faq-group-id");d(e).addClass("--edit");var t=d(e).find(".jfaq-group-title-input");d(t).focus();e=d(t).val().length;t[0].setSelectionRange(e,e),l.refreshLayout()},editFAQGroupKeyUp:function(e){27===e.which?l.doCancelEditFAQGroup(e.currentTarget):13===e.which&&l.doUpdateFAQGroup(e.currentTarget)},cancelEditFAQGroup:function(){l.doCancelEditFAQGroup(this)},doCancelEditFAQGroup:function(e){e=d(e).closest(".jfaq-group");d(e).removeClass("--edit"),l.render()},deleteFAQGroup:function(){var e;confirm("Are you sure you really want to delete this FAQ Group ? Individual FAQs within this group will not be deleted.")&&(e=d(this).closest(".jfaq-group"),e=l.getIndexFromGroupEl(e),l.faq_groups.splice(e,1),l.updateFAQGroups(),l.render())},addNewFAQ:function(){d(".jfaq--add-faq").prop("disabled",!0);var e=Math.random().toString(36).substring(7),t={mode:"add",ID:e},a=l.editFAQTemplate(t),t=d(this).closest(".jb-content").find(".jb-body");d(t).append(a),wp.editor.initialize("jfaq-tmce-"+e,l.wpEditorOptions);e=d(t).find('.jfaq-item-edit[data-faq-id="'+e+'"]'),e=d(e).find("input.jfaq-title-input");d(e).focus(),l.refreshLayout()},addNewFAQGutenberg:function(){if(!l.pro)return alert("Adding FAQs with the block editor is only vailable in the pro version.\nIf you already have a license, please activate it from the Plugins page."),!1;d(".jfaq--add-faq-gut").prop("disabled",!0);var e=d(this).closest(".jb-content").find(".jb-body");l.doInsertNewFAQBlank(e)},toggleFaqGroup:function(e){var t=d(e.target);if(t.is(".jb-header")||t.is(".jfaq-group-info")){var a=t.closest(".jfaq-group"),e=l.getIndexFromGroupEl(a);return void 0!==l.faq_groups[e].collapsed&&(l.faq_groups[e].collapsed=!l.faq_groups[e].collapsed),l.updateFAQGroups(),void d(a).toggleClass("--opened")}if(t.is(".jfaq-group-controls-right")||t.closest(".jfaq-group-controls-right").length)return!1},refreshData:function(){var e=d(".jfaq-group");d(".jfaq-item");l.faq_groups=e.map(function(e,t){var a=d(t).find(".jfaq-item");a.length&&d(a).filter(function(e,t){return d(t).hasClass("--faq-disabled")}).map(function(e,t){return d(t).data("faq-id")}).get();return{ID:d(t).data("faq-group-id"),title:d(t).find("input.jfaq-group-title-input").val(),position:e,collapsed:!d(t).hasClass("--opened"),faqs:a.length?d(a).map(function(e,t){return d(t).data("faq-id")}).get():[]}}).get()},refreshLayout:function(){var e=d(".jfaq-group"),t=d(".jfaq-item"),a=d(".jfaq-groups .jfaq-info"),o=d(".jfaq-list .jfaq-info");0<d(e).length?d(a).addClass("hidden"):d(a).removeClass("hidden"),d(e).each(function(e,t){var a=d(t).find(".jfaq-info"),o=d(t).find(".jb-body .jfaq-item"),i=d(t).find(".jb-body .jfaq-item-edit");d(o).length||d(i).length?d(a).addClass("hidden"):d(a).removeClass("hidden");d(t).find(".jb-content")}),0<d(t).length?d(o).addClass("hidden"):d(o).removeClass("hidden");t=d(".--edit"),o=d(".--add");0<d(t).length||0<d(o).length?(d("#add-faq-group-btn").prop("disabled",!0),d(".jfaq--add-faq").prop("disabled",!0),d(".jfaq-control").prop("disabled",!0)):(d("#add-faq-group-btn").prop("disabled",!1),d(".jfaq--add-faq").prop("disabled",!1),d(".jfaq-control").prop("disabled",!1)),d(".jfaq-group-list").sortable({handle:".jfaq-group-handle",placeholder:"jfaq-group-highlight",connectWith:d(".jfaq-gc"),stop:function(){l.refreshData(),l.updateFAQGroups(),l.render()}}),d(".jfaq-list .jb-body").sortable({placeholder:"jfaq-item-highlight",cursor:"move",opacity:.75,connectWith:".jfaq-group .jb-body",helper:function(e,t){return l.copyHelper=t.clone().insertAfter(t),t.clone()},stop:function(){l.copyHelper&&l.copyHelper.remove()}}),d(".jfaq-list .jb-body").disableSelection(),d(".jfaq-group .jb-body").sortable({handle:".jfaq-item-handle",cursor:"move",opacity:.75,update:function(e,t){null==t.sender&&(l.refreshData(),l.refreshLayout(),l.updateFAQGroups())},over:function(e,t){d(".jfaq-group .jb-content").css("height",""),d(".jfaq-group .jb-body").removeClass("--item-hover"),0==d(e.target).find(".jfaq-item").length?(d(e.target).addClass("--item-hover"),d(t.placeholder).css("display","none")):d(t.placeholder).css("display","")},placeholder:"jfaq-item-highlight",connectWith:".jfaq-group .jb-body",receive:function(e,t){l.copyHelper=null;var a=t.item,a=d(a).data("faq-id"),a=d(this).find('.jfaq-item[data-faq-id="'+a+'"]');if(1<a.length)return l.isInGroup(this)?d(t.sender).sortable("cancel"):d(a)[1].remove(),alert("This FAQ is already in the group"),l.refreshData(),l.render(),!1;l.refreshData(),l.render(),l.updateFAQGroups(),l.refreshLayout()}}),d(".jfaq-group .jb-body").disableSelection()}};d(document).ready(function(){l.init()})}(jQuery);